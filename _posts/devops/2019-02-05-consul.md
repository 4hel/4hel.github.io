---
layout: post
title:  "consul"
date:   2019-02-05 10:00:00
categories: devops
---

## Running the Consul Agent

### Starting the Agent

Consul can be startet in development mode where it does not persist any state:

```bash
consul agent -dev
```

the log shows that the agent is running in server mode and is leader of the cluster.

### Cluster Members

```bash
consul members
```

Shows the members of the consul cluster. The output is based on the gossip protocol and eventually consistent.

For a strongly consistent view **HTTP** is used, which is forwarded to the server:

```bash
curl localhost:8500/v1/catalog/nodes
```

Additionaly **DNS** can be used to query:

```bash
dig @127.0.0.1 -p 8600 my-hostname.node.consul
```
