---
layout: post
title:  "The Go Programming Language"
date:   2017-01-13 17:30:00
categories: book
---

By Alan A. A. Donovan and Brian W. Kernighan

Resources:

| [https://golang.org/pkg/](https://golang.org/pkg/) | [https://talks.golang.org](https://talks.golang.org) | [Assembly](https://www.youtube.com/watch?v=KINIAgRpkDA) |
| :---- | :---- | :---- |
| [https://play.golang.org](https://play.golang.org) | [https://tour.golang.org](https://tour.golang.org) | [https://blog.golang.org](https://blog.golang.org)


Commands:

`go run` `go build` `go fmt` `go get`


* TOC
{:toc}

## Preface

The goals of language were to be 

* expressive

* efficient in both compilation and execution

* effective in writing reliable and robust programs


Go has become popular as a replacement for untyped scripting languages because it is faster and leads to fewer crashes due to unexpected type errors.

It is especially well suited for building infrastructure like networked servers or tools for programmers, but as a general purpose language it finds use in many areas like e.g. mobile applications or machine learning.


### Origins

Go is influenced by the languages [C](https://en.wikipedia.org/wiki/C_%28programming_language%29), [Oberon](https://en.wikipedia.org/wiki/Oberon_%28programming_language%29) and [communicating sequential processes](https://en.wikipedia.org/wiki/Communicating_sequential_processes)

The most important influence from C is the emphasis on programs that __compile to efficient machine code__ and __cooperate naturally with the abstractions of the operating system__ further it's expression syntax, control-flow statements, basic data types, call-by-value parameter passing and pointers.

Oberon influenced the syntax for packages, imports and method declarations.

Another lineage among Go's ancestors is a sequence of little known research languages developed at Bell Labs (!), which are inspired by Tony Hoare's communicating sequential processe.

The concept of lexical scope with nested functions is from Scheme.


### The Go Project

The philosophy of the languages creators is to achieve simplicity. As Rob Pike put it: "complexity is multiplicative" - fixing a problem by making one part of system more complex slowly but surely adds complexity to other parts. Only through simplicity of design can a system remain stable, secure, and coherent as it grows.

Go encourages an awareness of computer system design. Especially the importance of **locality** in order achieve a good cpu **cache hit ratio**. Aggregate type (array and struct) hold their elements directly, requiring less storage and fewer allocations and pointer indirections than languages that use indirect fields.

Because the modern computer is a parallel machine, Go has lightweight threads or **goroutines**. These have a variable stack size which is initially small enough to make their creation cheap, so creating e.g. a million of them is practical.


## 1. Tutorial

### Installation

Download from [Archive](https://golang.org/dl/) and run:

`tar -C /usr/local -xzf go$VERSION.$OS-$ARCH.tar.gz`

then add to .profile:

`export PATH=$PATH:/usr/local/go/bin`

The GOPATH environment variable is used to specify directories outside of $GOROOT that contain the source for Go projects and their binaries.


### Packages

Go code is organised in packages which can be compared to modules or libraries. A **package** consists of one or more *.go* source files in a single directory.

The package **main** is special. It defines a standalone executable program not a library. A function which is also called main is where the execution starts.

### Imports

The **import** declarations follows the package declaration. A program will not compile if there are missing or unused imports.

### Functions

A **function** declaration consists of the keyword *func*, the name of the function, a parameter list which can be empty, a result list which can be also empty, and the body which consists of statements enclosed in braces.

### Semicolons and Formating

Semicolons are not required except where two or more statement or declarations appear on the same line. Newlines following certain tokens are converted into semicolons. 

For code formating it is recommended to run **gofmt** automatically by the editor when a file is saved.

Additionaly **goimports** can be run to organize the import statement automatically.

### Misc

The variable *os.Args* is a slice of strings. Go uses **half-open intervals**, so s[m:n] contains n-m elements

The **var** declaration declares a variable. If it is not explecitly initialized the it is implicitly initialized to the **zero value**. This is 0 for numbers and "" for strings.

The optional initialization statement of the for loop must be a **simple statement**: a short variable declaration, an increment or assignment statement or a function call.

A **blank identifier**: `_` is used where syntax requires dealing with a variable that is not needed for program logic.

The function __main__ runs in a **goroutine**.

When a goroutine attempts a send or receive on a channel, it blocks until another goroutine attempts the corresponding receive or send operation, at which point the value is transferred and both goroutines proceed.
